# 2023.07.30

## 0. ê·¼í™©

1. ì™€ì¸ì•±
  - ì™€ì¸ì•±ì€ ì§€ê¸ˆ ê±°ì˜ ì¤‘ë‹¨ìƒíƒœë‹¤. ë‹¤ë¥¸ ìš°ì„ ìˆœìœ„ ë†’ì€ ê²ƒë“¤ì´ ë„ˆë¬´ ë§ì´ ë‚˜ì˜¤ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ëê¹Œì§€ ë§Œë“¤ê¸°ëŠ” í• êº¼ë‹¤! ë¬´ì¡°ê»€!
2. ì™€ì¸ ìê²©ì¦
  - ì™€ì¸ ìê²©ì¦ì€ 8ì›” 26ì¼(í† )ì— ì‹ ì²­í–ˆë‹¤. ê°™ì´ ê³µë¶€í•˜ëŠ” ì‚¬ëŒë“¤ì´ í…Œì´ìŠ¤íŒ…ì„ ë„ˆë¬´ ì˜í•´ì„œ ì£¼ëˆ…ë“¤ê¸°ëŠ” í•œë° Level 2 ì‹œí—˜ì€ ì´ë¡  ê³µë¶€ë¼.. ë‚˜ëŠ” ì´ë¡ ê³µë¶€ ì—´ì‹¬íˆ í•´ì„œ ìê²©ì¦ì€ ê°€ì¥ ë†’ì€ ë“±ê¸‰ìœ¼ë¡œ ë”°ê³  ì‹¶ë‹¤.
  - í…Œì´ìŠ¤íŒ… ìì‹ ê° ë¶™ìœ¼ë©´ Level 3ë„ ë„ì „ í•´ë´ì•¼ì§€ ğŸ’ª

## 1. vite bundle analyze ci ë§Œë“¤ê¸°

[rollup-plugin-analyzer](https://github.com/doesdev/rollup-plugin-analyzer) í”ŒëŸ¬ê·¸ì¸ì´ ìˆëŠ”ë° ì§„ì§œ ìœ ìš©í•˜ë‹¤. ì‹¤ìˆ˜ë¡œ import í•œ íŒ¨í‚¤ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸ë„ ìœ ìš©í•˜ê³  (dev í™˜ê²½ì—ë§Œ ë“¤ì–´ê°€ì•¼ í•˜ëŠ”ë° productionì— í¬í•¨ë˜ëŠ”ì§€ í™•ì¸ë„ ê°€ëŠ¥) lodash ê°™ì´ tree-shacking ì•ˆë˜ëŠ” ë¼ì´ë¸”ëŸ¬ë¦¬ê°€ í¬í•¨ë˜ì—ˆëŠ”ì§€ë„ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.

í•˜ì§€ë§Œ vite-plugin-legacyê³¼ ê°™ì´ ì‚¬ìš©í–ˆì„ ë•Œ vite-plugin-legacy ì´í›„ì— í”ŒëŸ¬ê·¸ì¸ì„ ë„£ì—ˆì„ ë•Œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆë‹¤. íŒŒë³´ì§€ëŠ” ì•Šì•˜ëŠ”ë° legacy bundlingëœ ì´í›„ì— if ë¬¸ìœ¼ë¡œ ë‹¤ ê±´ë„ˆ ë›°ì–´ ë²„ë¦¬ëŠ” ê²ƒ ê°™ë‹¤. ê·¸ë˜ì„œ vite-plugin-analyzer ì´í›„ì— vite-plugin-legacyê°€ ëŒë„ë¡ ì„ ì–¸í•´ì¤˜ì•¼ í•œë‹¤.

```js
return {
  plugins: [
    analyze({
      limit: 10,
      skipFormatted: false,
      summaryOnly: true,
      writeTo: (analyzeString) => {
        fs.writeFileSync('bundle-analyze.txt', analyzeString);
      },
    }),
    legacy(),
  ]
}
```

ë‚˜ëŠ” ê²°ê³¼ë¥¼ pr commentë¡œ ë°›ì•„ë³´ê³  ì‹¶ê¸° ë•Œë¬¸ì— ë²ˆë“¤ë§ ê²°ê³¼ë¥¼ íŒŒì¼ì— ì €ì¥í•˜ê³ , ì´ íŒŒì¼ì„ ì½ì–´ pr-commentë¡œ ë‹¬ì•„ì¤˜ì•¼ í•œë‹¤.

íŒŒì¼ì„ ì½ê³  ì¸ì½”ë”©í•œ í›„ pr-comment actionsì˜ ë„ì›€ì„ ë°›ì•„ ì½”ë©˜íŠ¸ì— ê°’ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤~!!

```yaml
- name: Read analyze report
  id: read-analyze-report
  run: |
    report=$(cat ./bundle-analyze.txt | sed '1,2d')
    report_encoded=$(echo "${report//$'\n'/%0A}")
    echo "::set-output name=report::$report_encoded"

- name: PR comment
  uses: thollander/actions-comment-pull-request@v2
  with:
    message: |
      <h2> :pencil: Bundle Analyze Report</h2>
      <strong>ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í–ˆë‹¤ë©´ ê¼­ í™•ì¸í•´ë³´ì„¸ìš” ğŸ™„ </strong><br/>
      ë²ˆë“¤ì‚¬ì´ì¦ˆê°€ í° ìƒìœ„ 10ê°œ íŒŒì¼ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆì–´ìš”.
      <br/>
      <br/>
      <details><summary><strong>ë¶„ì„ê²°ê³¼ ë³´ê¸°</strong></summary>

      ${{ steps.read-analyze-report.outputs.report }}

      </details>
    reactions: eyes, rocket
    comment_tag: execution
    mode: upsert
```

tada~ ğŸ‰

![img](../../assets/pr-bundle-analyze.png)


## 2. Git commit ë‚´ì—­ì—ì„œ committer ë³€ê²½í•˜ê¸°

github íšŒì‚¬ ê³„ì •ê³¼ ê°œì¸ ê³„ì •ì„ ë‘ê°œ ê´€ë¦¬í•˜ê³  ìˆì–´ì„œ committerê°€ ì˜ ëª» ì˜¬ë¼ê°„ ì ì´ ë§ì•˜ë‹¤. authorëŠ” ë°”ê¾¸ê¸° ì‰¬ì› ëŠ”ë° committerëŠ” ë°”ê¾¸ê¸° ì–´ë ¤ì› ëŠ”ë° ì´ë²ˆì— ë°©ë²•ì„ ì°¾ì•„ì„œ ê¸°ë¡í•œë‹¤.

```shell
git filter-branch --env-filter '
WRONG_EMAIL="ë³€ê²½ì „ ì´ë©”ì¼"
NEW_NAME="ìƒˆë¡œìš´ ì´ë¦„"
NEW_EMAIL="ìƒˆë¡œìš´ ì´ë©”ì¼"

if [ "$GIT_COMMITTER_EMAIL" = "$WRONG_EMAIL" ]
then
    export GIT_COMMITTER_NAME="$NEW_NAME"
    export GIT_COMMITTER_EMAIL="$NEW_EMAIL"
fi
if [ "$GIT_AUTHOR_EMAIL" = "$WRONG_EMAIL" ]
then
    export GIT_AUTHOR_NAME="$NEW_NAME"
    export GIT_AUTHOR_EMAIL="$NEW_EMAIL"
fi
' --tag-name-filter cat -- --branches --tags
```

ì°¸ê³ : https://velog.io/@anjaekk/Git-push%ED%96%88%EB%8D%98-%EB%AA%A8%EB%93%A0-commit-author%EC%99%80-committer%EB%B3%80%EA%B2%BD
